from rest_framework import serializers
from ..models.{{table_name}} import {{pascalcase table_name}}


class {{pascalcase table_name}}Serializer(serializers.Serializer):{{#each columns}}
    {{this.column_name}} = serializers.{{dataType 'django' this.data_type}}Field(
        {{~#compare this.data_type '==' 'VARCHAR'~}}
            max_length={{#if this.character_max_length}}{{this.character_max_length}}{{else}}255{{/if}},
        {{~/compare}})
{{~/each}}


    def create(self, validated_data):
        """
        Create and return a new `{{pascalcase table_name}}` instance, given the validated data.
        """
        return {{pascalcase table_name}}.objects.create(**validated_data)

    def update(self, instance, validated_data):
        """
        Update and return an existing `{{pascalcase table_name}}` instance, given the validated data.
        """
        {{#each columns}}
        instance.{{this.column_name}} = validated_data.get('{{this.column_name}}', instance.{{this.column_name}})
{{/each}}
        instance.save()
        return instance
